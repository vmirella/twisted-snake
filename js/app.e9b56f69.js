(function(e){function t(t){for(var o,r,a=t[0],l=t[1],c=t[2],u=0,h=[];u<a.length;u++)r=a[u],i[r]&&h.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==i[l]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},s=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/twisted-snake/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("64a9"),i=n.n(o);i.a},"20fe":function(e,t,n){"use strict";var o=n("870d"),i=n.n(o);i.a},2692:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("h1",[e._v("Twisted Snake")]),n("h3",[e._v("Score: "+e._s(e.score))]),n("span",{staticClass:"select-text"},[e._v("Select mode: ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.speed,expression:"speed"}],staticClass:"select-speed",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.speed=t.target.multiple?n:n[0]}}},e._l(e.options,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(" \n      "+e._s(t.text)+"\n    ")])}),0),n("div",{staticClass:"div-button"},[n("button",{class:e.isPlaying?"red":"green",on:{click:function(t){e.isPlaying?e.stop():e.start()}}},[e._v(e._s(e.isPlaying?"Stop":"Play"))])]),n("div",{staticClass:"score"},[n("ScoresBoard",{attrs:{scores:e.scores}})],1),n("div",{staticClass:"board"},[n("SnakeCanvas",{attrs:{cellSize:e.cellSize,countCells:e.countCells,speed:e.speed,isPlaying:e.isPlaying,score:e.score,stop:e.stop,addScore:e.addScore,points:e.points}})],1),n("div",{staticClass:"clear"})])},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("canvas",{ref:"board",staticClass:"snake-canvas",attrs:{width:e.boardSizePx,height:e.boardSizePx}})},a=[],l=(n("7514"),n("6c7b"),n("ac6a"),n("c5f6"),n("5f0a")),c=n.n(l),d=n("de56"),u=n.n(d),h={name:"SnakeCanvas",props:{cellSize:Number,countCells:Number,speed:Number,isPlaying:Boolean,score:Number,stop:Function,addScore:Function,points:Number},data:function(){return{head:null,food:null,directions:[{direction:"left",keyCode:39,move:{x:-1,y:0}},{direction:"top",keyCode:40,move:{x:0,y:-1}},{direction:"right",keyCode:37,move:{x:1,y:0}},{direction:"bottom",keyCode:38,move:{x:0,y:1}}]}},created:function(){var e=this,t=new window.Image;t.src=c.a,t.onload=function(){e.food=t};var n=new window.Image;n.src=u.a,n.onload=function(){e.head=n},this.resetSnake()},watch:{isPlaying:function(e){console.log(e),e&&(this.resetSnake(),this.move())}},mounted:function(){this.boardContext=this.$refs.board.getContext("2d"),window.addEventListener("keydown",this.onKeyPress)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyPress)},computed:{boardSizePx:function(){return this.cellSize*this.countCells}},methods:{resetSnake:function(){this.direction=this.directions[0];var e=this.getInitCell(),t=this.getInitCell();this.snake=[{x:e,y:t},{x:e+1,y:t},{x:e+2,y:t}]},getInitCell:function(){return Math.floor(Math.random()*(this.countCells-3-3))+3},move:function(){var e=this;if(this.isPlaying){this.clear(),this.setTargetCell();var t={x:this.snake[0].x+this.direction.move.x,y:this.snake[0].y+this.direction.move.y};if(this.isCellOutOfBoard(t)||this.amountCellsInSnake(this.snake[0])>1)return this.stop(),void this.drawMessage();this.isTargetNewHead()?(this.snake.unshift(this.targetCell),this.targetCell=null,this.addScore(this.points)):(this.snake.unshift(t),this.snake.pop()),this.boardContext.beginPath(),this.snake.forEach(function(t,n){0===n?e.drawHead(t):e.drawCell(t)}),this.boardContext.closePath(),setTimeout(this.move,this.getMoveDelay())}},clear:function(){this.boardContext.clearRect(0,0,this.boardSizePx,this.boardSizePx)},drawCell:function(e){var t=e.x,n=e.y,o=t*this.cellSize+Math.round(this.cellSize/2),i=n*this.cellSize+Math.round(this.cellSize/2),s=Math.round(this.cellSize/2);this.boardContext.beginPath(),this.boardContext.arc(o,i,s,0,Math.PI/180*360,!0),this.boardContext.fillStyle="#9F7267",this.boardContext.fill()},drawHead:function(e){var t=e.x,n=e.y;this.boardContext.drawImage(this.head,t*this.cellSize,n*this.cellSize,this.cellSize,this.cellSize)},getMoveDelay:function(){return 2/this.speed*1e3},isCellOutOfBoard:function(e){var t=e.x,n=e.y;return t<0||n<0||t>=this.countCells||n>=this.countCells},onKeyPress:function(e){var t=this.directions.find(function(t){return t.keyCode===e.keyCode});t&&2!==Math.abs(t.keyCode-this.direction.keyCode)&&(this.direction=t)},setTargetCell:function(){if(!this.targetCell){var e=this.getRandomCell();while(this.amountCellsInSnake(e)>0)e=this.getRandomCell();this.targetCell=e}this.boardContext.beginPath(),this.boardContext.drawImage(this.food,this.targetCell.x*this.cellSize,this.targetCell.y*this.cellSize,this.cellSize,this.cellSize),this.boardContext.closePath()},getRandomCell:function(){return{x:Math.floor(Math.random()*this.countCells),y:Math.floor(Math.random()*this.countCells)}},amountCellsInSnake:function(e){var t=this.snake.filter(function(t){var n=t.x,o=t.y;return n===e.x&&o===e.y});return t.length},isTargetNewHead:function(){return this.snake[0].x+this.direction.move.x===this.targetCell.x&&this.snake[0].y+this.direction.move.y===this.targetCell.y},drawMessage:function(e){var t=Math.floor(this.boardSizePx/2);this.boardContext.beginPath(),this.boardContext.fillStyle="#AFB9F0",this.boardContext.rect(60,180,360,90),this.boardContext.fill(),this.boardContext.beginPath(),this.boardContext.font="30px Helvetica",this.boardContext.textAlign="center",this.boardContext.fillStyle="#fafafa",this.boardContext.fillText("Game over!",t,t-15),this.boardContext.fillText("You have scored ".concat(this.score," points"),t,t+15)}}},f=h,p=(n("aef3"),n("2877")),v=Object(p["a"])(f,r,a,!1,null,"9baa2952",null),C=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Scores")]),n("ul",e._l(e.orderedScores,function(t,o){return n("li",{key:o},[n("span",[e._v("Score "+e._s(o+1)+":")]),e._v(" "+e._s(t)+" points")])}),0)])},x=[],b=(n("55dd"),{name:"Scores",props:{scores:Array},computed:{orderedScores:function(){return this.scores.sort(function(e,t){return t-e})}}}),g=b,m=(n("20fe"),Object(p["a"])(g,y,x,!1,null,"1185779a",null)),S=m.exports,k={name:"app",components:{SnakeCanvas:C,ScoresBoard:S},data:function(){return{cellSize:30,countCells:16,speed:8,isPlaying:!1,score:0,points:1,scores:[],options:[{text:"Easy",value:4},{text:"Normal",value:8},{text:"Hard",value:12}]}},methods:{start:function(){this.isPlaying=!0,this.score=0},stop:function(){this.isPlaying=!1,this.scores.push(this.score)},addScore:function(e){this.score+=e}}},w=k,P=(n("034f"),Object(p["a"])(w,i,s,!1,null,null,null)),_=P.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(_)}}).$mount("#app")},"5f0a":function(e,t,n){e.exports=n.p+"img/food.04318135.png"},"64a9":function(e,t,n){},"870d":function(e,t,n){},aef3:function(e,t,n){"use strict";var o=n("2692"),i=n.n(o);i.a},de56:function(e,t,n){e.exports=n.p+"img/zoo.8a75e76c.png"}});
//# sourceMappingURL=app.e9b56f69.js.map